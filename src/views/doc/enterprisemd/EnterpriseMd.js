// Generated by XCloud DevOps for Codegen, refer: http://dts.devops.wl4g.com
import {transDate, getDay} from 'utils/'
import { Editor } from '@toast-ui/vue-editor'

export default {
    name: 'enterpriseMd',
    data() {
        return {

            subPath: '/md',
            path: '',

            content: '',

            data: {},

            editorText: '',

            editorOptions: {
                language: 'zh-CN'
            }

        }
    },

    activated() {
        this.$store.dispatch('set_menu_close')
    },

    mounted() {

    },
    methods: {

        openFile(path) {
            console.info(path)
            let that = this;
            this.path = path;
            this.$$api_doc_getFileInfo({
                data: {
                    subPath: this.subPath,
                    path: path,
                },
                fn: json => {

                    that.$refs["myToastEditor"].invoke("setMarkdown", json.data.content);

                },
            })
        },

        saveFile(){
            //TODO
            let content = this.$refs["myToastEditor"].invoke("getMarkdown");

            this.$$api_doc_saveFile({
                data: {
                    subPath: this.subPath,
                    path: this.path,
                    content: content,
                },
                fn: json => {
                    this.$message({
                        message: 'Success',
                        type: 'success'
                    });
                    this.openFile(this.path);
                },
            })
        },



        test(){
            const editor = new Editor({
                el: document.querySelector('#editor'),
                //previewStyle: 'vertical',
                height: '100%',
                initialValue: this.editorText,
                language: "zh-CN",
                // Step 2: Set the defined plugin function as an option value
                plugins: [this.youtubePlugin]
            });
        }



    }
}
